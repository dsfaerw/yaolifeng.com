## 深入理解位运算符及其在JavaScript中的应用
- 在我们之前的文章中，我们已经简单介绍了位运算在JavaScript中的应用，[点击这里查看之前的文章](https://mp.weixin.qq.com/s/gn4sBeM6luE_b6jaAZOgyQ)。
- 本篇文章，我们将更深入地探讨位运算，帮助你更全面地理解它。


### 常见位运算符

| 运算符 |            描述            |                      运算规则                       |
| :----: | :------------------------: | :-------------------------------------------------: |
|   &    |         按位与 and         |   两个对应的二进制位都为 1 时，结果为 1，否则为 0   |
|   \|   |         按位或 or          | 两个对应的二进制位有一者为 1 时，结果为 1，否则为 0 |
|   ^    |        按位异或 XOR        |    两个对应的二进制位相异时，结果为 1，否则为 0     |
|   ~    |      按位取反 reverse      |       对原码进行取反运算，1 变为 0，0 变为 1        |
|   <<   |    左移 n 位 move left     |       将二进制位左移 n 位，，高位移出低位补 0       |
|   >>   | 有符号右移 n 位 move right |     将二进制位右移 n 位，高位移出，低位补符号位     |
|  >>>   |      无符号右移 n 位       |       将二进制位右移 n 位，高位移出，低位补 0       |

#### & 与运算:

```js
0 & 0 = 0
0 & 1 = 0
1 & 0 = 0
1 & 1 = 1
```

-   总结：`两位同时为1，结果才为1，否则结果为0。`
-   例如：3&5

```js
    0000 0011
    0000 0101
  = 0000 0001
```

-   因此 3&5 的值为 1。
-   `注意：负数按补码形式参加按位与运算。`
-   用途：

    -   1. 判断奇偶
    -   只要根据最未位是 0 还是 1 来决定，为 0 就是偶数，为 1 就是奇数。因此可以用 if ((i & 1) == 0)代替 if (i % 2 == 0)来判断 a 是不是偶数。
    -   2.  清零
    -   如果想将一个单元清零，即使其全部二进制位为 0，只要与一个各位都为零的数值相与，结果为零。

    ```js
    function clearWithBitwiseAnd(number) {
        const zeroMask = 0; // 创建一个各位都是0的整数作为掩码

        const clearedNumber = number & zeroMask; // 使用位与操作将 number 清零

        return clearedNumber;
    }

    const originalNumber = 12345;
    const clearedNumber = clearWithBitwiseAnd(originalNumber);
    ```

#### | 或运算:

```js
0 | 0 = 0
0 | 1 = 1
1 | 0 = 1
1 | 1 = 1
```

-   总结：`参加运算的两个对象只要有一个为1，其值为1。`
-   例如：3&5

```js
    0000 0011
    0000 0101
  = 0000 0111

parseInt(111, 2); // 7
```

-   因此，3|5 的值为 7。
-   `注意：负数按补码形式参加按位或运算。`

#### ^ 异或运算

```js
0 ^ 0 = 0
0 ^ 1 = 1
1 ^ 0 = 1
1 ^ 1 = 0
```

-   总结：`参加运算的两个对象，如果两个相应位相同为0，相异为1。`
    例如：3^5

```js
    0000 0011
    0000 0101
  = 0000 0110

parseInt(110, 2); // 6
```

-   因此，3^5 的值为 6。
-   异或运算符的性质：
    -   `交换律：(a^b)^c == a^(b^c)`
    -   `结合律：(a + b)^c == a^b + b^c`
    -   `对于任何数x，都有 x^x=0，x^0=x`
    -   `自反性: a^b^b=a^0=a`

#### ~ 取反运算

-   对参数运算的数据按二进制进行 "取反" 操作。

```js
~ 1 = 0
~ 0 = 1
```

-   总结：`对一个二进制数位按位取反，即0变1，1变0`
-   例如：~6

```js
  0000 0110
= 1111 1001
```

-   `在计算机中，正数用原码表示，负数使用补码存储，首先看最高位，最高位1表示负数，0表示正数。`
-   `当发现按位取反为负数时，就直接取其补码，变为十进制：`

```js
     0000 0110
   = 1111 1001
反码：1000 0110
补码：1000 0111

// 疑惑点：为什么补码后成为 1000 0111
`先求反码：原码的基础上，除最高位（符号位）外，其余位取反。
再求补码：反码的基础上，最低位加1。`
```

-   因此，~6 的值为-7。

#### << 左移运算

-   定义：`将一个运算对象的各二进制位左移若干位，左边的二进制位丢弃，右边补0`
-   例如：

```js
a = 1010 1110
a = a << 2
a = 1011 1000

`00 舍弃` 1011 1000 = 1011 1000
```

-   `若左移时舍弃的高位不包含1，则每左移一位，相当于该数乘以2`

#### >> 右移运算

-   定义：`将一个数的各二进制位全部右移若干位，正数左补0，负数左补1，右边丢弃。`
-   例如：

```js
a = 1010 1110
a = a >> 2
a = 0010 1011

0010 1011 `10 舍弃` = 0010 1011
```

-   例如，`a = a >> 2 将a的二进制位右移2位，左补0或者左补1的看被移数时正还是负`。
-   `操作数每右移一位，相当于该数除以2。`

#### 原码，补码，反码

-   计算机中的有符号数有三种表示方法，即原码，补码，反码。这三种表示方法均有符号位和数值位两部分，符号位都是用 0 表示正，用 1 表示负，而数值位，三种表示方法各不相同。

1.  原码：原码就是一个数的二进制数。

-   例如：10 的原码为 0000 1010

```js
// 获取方法
// num.toString(2)
```

2.  反码：正数的反码与原码相同，如: 10 的反码为 0000 1010。负数的反码为除符号位，按位取反，即 0 变 1，1 变 0.

-   例如：-10

```js
原码：0000 1010
反码：1111 0101
```

3.  补码：正数的补码与原码相同，如：10 的原码为 0000 1010。负数的补码是原码除符号位的所有位取反即 0 变 1，1 变 0，然后加 1 也就是反码加 1。

-   例如：-10

```js
原码：1000 1010
反码：1111 0101
补码：1111 0110

// 此时补码这里有点疑惑，详细过程就是：
// 1. 先从最右边的一位（最低位）开始相加，1（反码）加 1，结果是 2。在二进制中，2 表示为 10。所以，我们将该位写入 0，并在下一位（从右往左数的第二位）中进位 1。
// 2. 再来看第二位，0（反码）+ 1（进位） =1。
// 3. 其他位，因为没有进位，所以保持不变。
// 4. 所以，计算出 -10 的补码是 11110110

`先求反码：原码的基础上，除最高位（符号位）外，其余位取反。
再求补码：反码的基础上，最低位加1。`
```
